---
layout: post
title: 《Math for Programmers》笔记-第一部分 向量和图形
category: Read Notes
tags: [Math for Programmers]
---

## 通过代码学数学

**本章内容**

> 将数学知识和软件开发结合起来解决商业问题

> 绕开学习数学时的常见陷阱

> 从变成角度来思考数学问题

> 将Python作为一个强大、可扩展的计算器

在本书的第一部分中，你将详细学习各种维度的向量以及如何使用高维数据。第二部分将介绍不同类型的函数，如线性函数和指数函数，并通过分析其变化率来进行比较。最后，第三部分将探讨如何建立数学模型，将数据集的所有维度纳入其中，从而获得更准确的图形。

### 如何高效的学习数学

大学水平的教科书往往是非常公式化的：先定义一些新的属于，再用这些属于陈述一些事实（即定理），然后证明这些定理为真。

这听起来是一个符合逻辑的顺序：介绍所讲的概念，陈述一些可以得出的结论，然后证明这些结论。那么学习高数课本难在哪里呢？

问题是数学知识实际上并不是这样创造出来的。当提出新的数学思想时，在找到正确的定义之前，可能会经过很长一段时间的实验。

我们从这个过程吸取的主要经验在于，应该从全局思考开始，不要拘泥于形式。一旦对数学的工作原理有了大致的了解，词汇和符号就会成为有用的工具，而不会分散你的注意力。

对于有经验且在工作中热衷于学习变成的程序员来说，可以用几种具体的方法来很好地学习数学。

1. 使用正式的语言
    * 留意新的数学对象，他们看起来想你所熟知的对象，但行为方式却不一样。
    * 写代码的时候，仅仅写出语法正确的语句是不够的。语句所代表的思想需要时有意义的、合法的。
2. 构建你自己的计算器
    * Python不仅自带算术运算、math模块，还有众多可以随时引入的第三方数学库，让编程环境更加强大。因为Python是图灵完备的，所以你可以计算任何可以计算的东西，需要的只是一台足够强大的计算机、一个足够巧妙的程序实现，或者两者兼备。
3. 用函数建立抽象概念
    * 数学函数总是接受输入值，并总是返回没有副作用的输出值
    * 在编程中，我们把行为像数学函数的函数称为纯函数

**小结**

数学在许多软件工程领域都有着趣味盎然和收益颇丰的应用。

数学可以量化随着时间变化的数据趋势，如预测股票价格的走势。

不同类型的函数表示不同性质的行为。例如，指数折旧函数意味着汽车每行驶一英里就会损失其转售价的一个百分比，而不是一个固定数额。

数字元组（称为**向量**）代表多维数据。具体来说，三维向量是三元数对，可以表示空间中的点。可以通过组合向量指定三角形来构建复杂的三维图形。

**微积分**是研究连续变化的数学。许多物理定律是用微积分方方程来写的，这些方程称为**微分方程**。

传统课本中的数学很难学号！应该通过逐步探索来学习数学，而不是直接在定义和定理中挣扎前进。

作为一名程序员，你已经训练了自己精确思考和沟通的能力，这种技能也会帮助你学习数学。


# 第一部分 向量和图形

第一部分（指本书第2章至第7章）将深入研究称为**线性代数**的数学分支。线性代数能够在非常高的层次上处理多维度的计算，这里的“维度”是一个集合概念。线性代数让我们把关于维度的集合概念变成可以具体计算的东西。

线性代数中最基本的概念是**向量**(vector)，可以把它看作某个多维空间中的一个数据点。例如，二维空间中的向量对应于平面上的点，可以用形式为(x, y)的有序数来表示，三维空间中的向量可以用形式为(x, y, z)的三元数对来表示。基于这两种情况，我们可以使用向量的集合来定义几何图形，而这些形状又可以被转换成有趣的图形。

线性代数中的另一个关键概念是**线性变换**(linear transformation)。线性变换是一种函数，将一个向量作为输入并返回一个向量作为输出，同时保持所操作向量(在特殊意义上)的几何形状。例如，如果一个向量的集合位于二维平面的一条直线上，在应用线性变换后，他们仍然会位于一条直线上。我们对于线性变换的最终应用是，在一个Python程序中，随着时间的推移将其应用到图形之上，从而得到三维动画。

在第6章，会对二维空间和三维空间的概念进行逆向研究，得到**向量空间**(vector space)的一般概念，并更具体地定义**维度**的概念。值得注意的是，由像素构成的数字图像可以被看作高维向量空间中的向量，可以通过线性变换来进行图像处理。

最后，第7章中会研究线性代数中最普遍的计算工具：解**线性方程组**(system of linear equations)。一般来说，线性方程组能帮助我们求得线、屏幕或高维空间在向量空间中的相交位置。通过使用Python处理线性方程组，我们将构建视频游戏引擎的第一个版本。

## 二维向量绘图

**本章内容**

> 使用向量集合创建和处理二维图像

> 用箭头哦、坐标和有序二元组表示二维向量

> 从使用向量运算在平面上转换图形

> 使用三角学测量平面内的距离和角度

物理学通常把时间看作第四位，事件会发生在特定的时间和地点。数据科学中的数据集通常包含更多维度。举例来说，网站跟踪的用户可以有数百个可测量的属性，这些属性描述了用户的使用习惯。要解决这些图形学、物理学以及数据分析相关的问题，需要一个能够处理高维数据的框架，即**向量数学**。

向量就是多维空间中的对象，有自己特定的算法规则(加法、乘法等)。

**二维向量**(two-dimensional vector)是平面上相对于远点的一个点。

如何表示二维向量？

可以用尺子测量一维世界中的对象，比如一个物体的长度。要测量二维对象，我们需要两把尺子。这些尺子就是**坐标轴**，他们彼此垂直，相交于原点。一般将二维坐标写成x坐标和y坐标的有序数对(或者叫做元组)

用Python绘制二维图形

要在屏幕上绘制图形，我们有大量的语言和库可供选择：OpenGL、CSS、SVG等等。具体到Python中，有Pillow和Turtle这样的库，非常适合用向量来进行绘图。

练习：当X坐标再-10到10范围内时，使用draw函数绘制向量(x, x**2)的点

~~~python
# 为了绘制这个图标，给draw函数传递了两个额外的关键参数。grid参数为(1, 10)，表示每隔1各单位绘制垂直网格线，以及每隔10个单位绘制水平网格线。nice_aspect_tatio参数设置为False，表示X轴和y轴的比例不必相同。

draw(
    Points(*[(x, x**2) for x in range(-10, 11)]),
    grid=(1,10),
    nice_aspect_ratio=False
)
~~~

## 平面向量运算

和数一样，向量也有自己的运算方式。对向量进行运算可以生成新的向量，且可以将结果可视化。向量运算除了包含代数变化，还有几何变化。

最基本的向量运算是：**向量加法**。给定两个输入向量，将它们的X坐标相加，得到新的X坐标，然后将它们的y坐标相加，得到新的y坐标。用这些新的坐标创建一个新的向量，就得到了原始向量的**向量和**。

添加一个向量意味着移动或**平移**一个现有的点或点的集合。

向量的分量和长度

把一个已有的向量分解成更小的多个向量之和是一种非常有用的操作。例如将向量(4, 3)分解为(4, 0)与(0, 3)之和。这两个分解后的向量分别成为x分量与y分量。向量的**长度**(length)就是代表它的箭头的长度，等价于从远点到它表示的点的距离。

向量与数相乘

将向量乘以数的运算称为标量乘法。处理向量时，普通的数通常被称为**标量**(scalar)。scalar这个名字非常贴切，因为运算的效果是将目标向量按照给定的系数进行**缩放**(scale)。标量是否为整数并不重要。

减法、位移和距离

向量的标量乘法和数的乘法一致：一个数的整数倍数与这个数重复相加是一样的。这同样适用于向量，负向量和向量减法也如出一辙。

位移是一个向量，而距离是一个标量（一个数）。

## 平面上的角度和三角学

像原始坐标对一样，可以用一个新的数对(5,37°)唯一地确定该向量，这种形式的坐标称为**极坐标**(polar coordinates)。有时候，比如做向量加法时，使用笛卡尔坐标更简单；而其他时候，极坐标更实用，特别是进行向量旋转时。在写代码时，因为没有所谓刻度尺或量角器，所以只能依赖三角函数。

从角度到分量

给定一个角度，该角度上向量的坐标将有一个固定的比值，我们不可能每次都幸运的得到一个整数的比值，但每个角度都有一个固定的比值。比值可以解释为每个水平单位对应了x个垂直单位，x就是比值。这个比值叫作角的**正切**，正切函数写作tan。tan(37°) ≈ 3/4   tan(116.57°) ≈ -2  tan(45°) ≈ 1 tan(200°) ≈ 0.36

在这里，为表示**近似**相等，用符号 ≈ 而不是 =。正切函数是一个**三角**(trigonometric1)函数，因为它可以用来测量三角形。

正切实际上并不给出坐标，只给出比值。在这一点上，另两个三角函数很有帮助：**正弦**(sin)和余弦(cos)。从角度和距离的关系来看，角的正切等于垂直距离除以水平距离。

相比之下，正弦函数和余弦函数给出了向量的垂直距离、水平距离和整体距离之间的关系，其定义的公示如下：
1. sin(角度) = 距离 / 垂直距离
2. cos(角度) = 距离 / 水平距离

Python中的三角学和弧度

在Python中不使用角度，事实上大多数数学家也不使用角度。他们使用**弧度**(radian)来代替角度，换算系数是 1弧度约等于 57.296°。之所以这样是因为一个特殊的数派，它的值约为3.14159.正是它搭建了角度和弧度的桥梁。 派弧度等于180°，2派弧度等于360°。

~~~python
>>> from math import tan, pi
>>> tan(pi/4)
0.99999999999999
~~~

现在可以实现一个to_cartesian函数，接收一对极值坐标哦并返回相应的笛卡尔坐标。

~~~python
from math import sin, cos
def to_cartesian(polar_vector):
    length, angle = polar_vector[0], polar_vector[1]
    return (length*cos(angle), length*sin(angle))
~~~

从分量到角度

给定一对笛卡尔坐标，可以使用勾股定理计算向量的长度。Python的 **反正弦(asin)三角函数**math.asin()可以实现接收sin(x)的值并返回x。例如：sin(1) = 0.84147098  asin(0.84147098) = 1。

但是math.asin并不完美，因为不同角度可以有相同的正弦。**反余弦**(acos)在Python中被实现为math.acos，为了找到我们真正想要的x的值，必须确保它的**正弦和余弦**都与我们期望的值一致。

而反正弦、反余弦或反正切函数都不足以找到平面内某个点与x轴正半轴的夹角。Python可以完成这个工作，match.atan2函数接受平面上一个点的笛卡尔坐标作为参数，返回对应的弧度。例如： atan2(3,-2) = 2.15879893。

总而言之，三角函数是很难反解的。多个不同的输入可以产生相同的输出，所以一个输出并不能对应唯一的输入。

## 向量集合的变换

当处理向量时，某种坐标系可能比另一种坐标系更好。用笛卡尔坐标移动或平移向量集合很容易，而在极坐标中就不那么自然了。不过，由于极坐标包含角度信息，会使得旋转向量更为方便。

组合向量变换

目前为止，我们已经学习了如何平移、缩放和旋转向量。将这些变换用于向量的集合，会对这些向量在平面上定义的形状产生同样的效果。当依次应用这些向量变换时，效果会非常惊人。

## 用Matplotlib绘图

Polygon、Points、Arrow和Segment类并无特别之处，只是保存了其构造函数传递的数据。

draw函数首先计算出图形的大小，然后逐一绘制传给它的每个对象。


**本章内容**

> 建立三维向量的心智模型

> 进行三维向量运算

> 使用点积和向量测量长度和方向

> 在二维平面上渲染三维模型


## 在三维空间中绘制向量
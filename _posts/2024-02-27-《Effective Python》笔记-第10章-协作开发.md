---
layout: post
title: 《Effective Python》笔记-第10章 协作开发
category: Read Notes
tags: [Effective Python]
---


## 第八十二条：学会寻找由其他Python开发者所构建的模块

如果面对一项自己不熟悉的需求，可以去PyPI（Python Package Index, 网址为https://pypi.org）搜索一下，看看有没有哪个软件包能够帮你更快达到目标。

可以用pip命令行工具从PyPI里面安装软件包，大多数PyPI模块都是自由及开源软件。pip最好与内置的venv模块搭配使用，这样可以给不同的项目安装不同版本的软件包，以适应每个项目自身的要求。

## 第八十三条：用虚拟环境隔离项目，并重建依赖关系

因为同一个模块在Python的全局环境中只能存在一个版本。如果某个软件包需要使用新版模块，另一个软件包需要使用旧版模块，那么会遇到两难局面：无论这个模块是否升级，这两个软件包都会有一个无法运行。这种情况通常称为dependency hell。

我们可以在每个虚拟幻境里，分别用pip命令安装它所需要的软件包，这样的话，同一台电脑中就可以存在许多互不冲突的环境了。

python -m venv命令可以创建虚拟环境，source bin/activate与deactivate命令分别可以启用与禁用该环境。

python -m pip freeze > requirements.txt命令可以把当前环境所依赖的软件包保存到文件中，之后可以通过python -m pip install -r requirements.txt在另一套环境重新安装这些包。

> venv好像已经过时了，现在大部分开发项目都在使用miniconda

## 第八十四条：每一个函数、类与模块都要写docstring

每个模块、类、方法与函数都应该编写docstring文档，并且要实现代码保持同步。

模块的docstring要介绍本模块的内容，还要指出用户必须了解的关键类与重要函数。

类的docstring要写在class语句的正下方，描述本类的行为与重要的属性，还要指出子类应该如何正确地继承这个类。

函数与方法的docstring要写在def语句地正下方，描述本函数的每个参数、函数的返回值，可能抛出的异常以及其他相关的行为。

如果某些信息已经通过类型注解表达过了，那就不要在docstring中重复了。

## 第八十五条：用包来安排模块，以提供稳定的API



## 第八十六条：考虑用模块级别的代码配置不同的部署环境



## 第八十七条：为自编的模块定义根异常，让调用者能够专门处理与此API有关的异常



## 第八十八条：用适当的方式打破循环依赖关系



## 第八十九条：重构时考虑通过warnings提醒开发者API已经发生变化



## 第九十条：考虑通过typing做静态分析，以消除bug